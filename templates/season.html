<!DOCTYPE html>
<html>
  <head>
    <title>Season View</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      .driver-card,
      .race-card {
        border: 1px solid #dee2e6;
        border-radius: 10px;
        padding: 1rem;
        text-align: center;
        background-color: #ffffff;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        margin-bottom: 1rem;
      }
      .driver-img {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        object-fit: cover;
        margin-bottom: 0.5rem;
      }
    </style>
  </head>
  <body class="container mt-5">
    <a href="{{ url_for('home') }}" class="btn btn-outline-dark mb-4"
      >‚¨ÖÔ∏è Back</a
    >

    {% if table is defined and table.__class__.__name__ == "DataFrame" %}
    <h1 class="mb-4">üèÅ Weighted Driver Rankings</h1>
    <div class="row">
      {% for index, row in table.iterrows() %}
      <div class="col-md-4">
        <div class="driver-card">
          <img
            src="/static/driver_photos/{{ row['Driver'] | lower }}.jpg"
            alt="{{ row['Driver'] }}"
            class="driver-img"
            onerror="this.src='/static/driver_photos/default.jpg'"
          />
          <h5>{{ row['Driver'] }}</h5>
          <p>üî• Hype: {{ row['Hype'] }}</p>
          <p>
            üí∞ Value: ${{ ((row['Hype'] * 0.1 + row['Hype'] * 0.9) * 250000) |
            round | int | format(',') }}
          </p>
        </div>
      </div>
      {% endfor %}
    </div>

    {% elif races is defined %}
    <h1 class="mb-4 text-center">üìÖ Full Driver Season Summary</h1>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
      {% for race in races %}
      <div class="col">
        <div class="race-card p-3 shadow-sm">
          <h5 class="card-title">
            {{ race['Grand Prix'] }} ({{ race['Year'] }})
          </h5>
          <p>
            <strong>Qualifying:</strong> {{ race['Quali'] }}<br />
            <strong>Race:</strong> {{ race['Race'] }}<br />
            <strong>Positions Gained:</strong> {{ race['+Pos'] }}<br />
            <strong>Q/R/+O:</strong> {{ race['Q/R/+O'] }}<br />
            <strong>Total Points:</strong> {{ race['Total Points'] }}<br />
            {% if race['Boost'] is defined and race['Boost'] %}
            <span class="badge bg-warning text-dark"
              >üöÄ Boost Applied: {{ race['Boost'] | capitalize }}</span
            >
            {% endif %}
          </p>
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <div class="alert alert-warning">‚ö†Ô∏è No data available.</div>
    {% endif %}
  </body>
</html>
